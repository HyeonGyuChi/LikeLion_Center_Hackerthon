{% extends 'base.html' %}
{% block contents %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Form</title>
    <link rel="stylesheet" type="text/css" href="{% static 'docxmerge/styles.css' %}">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script type="text/javascript">
        var frm = $('#submit-form');
        $(document).on('click', '#submit-btn', function() {
            $('.form-container').hide();
            $('.loading').show();
            // $('.loading').show();
            $.ajax({
                type: frm.attr('method'),
                url: frm.attr('action'),
                // data: {request:frm, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
                data: frm.serialize(),
                success: function(response){
                    // alert(response.message);
                },
                error: function(request, status, error){
                    alert("알 수 없는 에러");
                    window.location.replace("/users/login/");
                    alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                },
            });
        });
    </script>
</head>
<body>
<div class="container form-container">
    <h2>정보 입력</h2>
    <!-- <form method="POST" action="{% url 'docxmerge:make' %}">
        {% csrf_token %}
        이름:
        <input name="writer_name" type="text">
        <br>
        주소:
        <input name="writer_address" type="text">
        <br>
        전화번호:
        <input name="writer_phone" type="tel">
        <br>
        이메일:
        <input name="writer_email" type="email">
        <br><br>
        <input type="submit" class="btn btn-light" value="make resume">
    </form> -->
    <form id="submit-form" method="POST" action="{% url 'docxmerge:make' %}">
        {% csrf_token %}
        <table id="form-table">
                {{ form.as_table }}
        </table>
        <input id="submit-btn" type="submit" class="btn btn-light">
    </form>
</div>
<div class="container loading"></div>
</body>
</html>
{% endblock %}